"use strict";(self.webpackChunkmacabrosMasterRaceFront=self.webpackChunkmacabrosMasterRaceFront||[]).push([[814],{9473:(O,u,r)=>{r.r(u),r.d(u,{ListUserModule:()=>z});var U=r(6019),p=r(8642),f=r(1659),m=r.n(f),t=r(2383),l=r(4522),T=r(8260);let v=(()=>{class o{constructor(e){this.http=e,this.baseUrl=T.N.baseUrl}sacarUsuarios(){const e=`${this.baseUrl}/usuarios`,n=(new l.WM).set("Authorization",`Bearer ${localStorage.getItem("token")}`);return this.http.get(e,{headers:n})}cambiarRol(e,n){const s=`${this.baseUrl}/usuario/${e}?rol=${n}`,a=(new l.WM).set("Authorization",`Bearer ${localStorage.getItem("token")}`);return this.http.put(s,{headers:a})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(l.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var c=r(9326),C=r(481),d=r(5286),g=r(7043),Z=r(4750);function A(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",16),t.TgZ(1,"div",17),t._UZ(2,"i",18),t.TgZ(3,"input",19),t.NdJ("input",function(s){t.CHM(e);const a=t.oxw(),h=t.MAs(2);return a.applyFilterGlobal(s,"contains",h)}),t.qZA(),t.qZA(),t.qZA()}}function b(o,i){1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"th",20),t.TgZ(2,"div",21),t._uU(3," Nombre "),t._UZ(4,"p-sortIcon",22),t.qZA(),t.qZA(),t.TgZ(5,"th",23),t.TgZ(6,"div",21),t._uU(7," Email "),t._UZ(8,"p-sortIcon",24),t.qZA(),t.qZA(),t.TgZ(9,"th",25),t.TgZ(10,"div",21),t._uU(11," Direcci\xf3n "),t._UZ(12,"p-sortIcon",26),t.qZA(),t.qZA(),t.TgZ(13,"th",27),t.TgZ(14,"div",21),t._uU(15," N\xfamero de telefono "),t._UZ(16,"p-sortIcon",28),t.qZA(),t.qZA(),t.TgZ(17,"th",29),t.TgZ(18,"div",21),t._uU(19," Rol "),t._UZ(20,"p-sortIcon",30),t.qZA(),t.qZA(),t.qZA())}const L=function(o){return["/paginasProtegidas/administrador/listUsers/pedidos-user",o]};function M(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"tr",31),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td",32),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().cambiarRol(a)}),t._uU(10),t.qZA(),t.qZA()}if(2&o){const e=i.$implicit;t.Q6J("routerLink",t.VKq(6,L,e.name)),t.xp6(2),t.hij(" ",e.name," "),t.xp6(2),t.hij(" ",e.email," "),t.xp6(2),t.hij(" ",e.calle," "),t.xp6(2),t.hij(" ",e.telefono," "),t.xp6(2),t.hij(" ",e.rol," ")}}function y(o,i){1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td",33),t._uU(2,"No hay usuarios."),t.qZA(),t.qZA())}function R(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"p-button",34),t.NdJ("click",function(){return t.CHM(e),t.oxw().guardarRol()}),t.qZA(),t.TgZ(1,"p-button",35),t.NdJ("click",function(){return t.CHM(e),t.oxw().display=!1}),t.qZA()}}const N=function(){return[10,25,50]},E=function(){return["name","email","calle","telefono","rol"]},F=function(){return{width:"150px"}},S=[{path:"",component:(()=>{class o{constructor(e){this.userComponent=e,this.listUsers=[],this.espera=!1,this.display=!1,this.rolUsuario="USER"}ngOnInit(){this.listarUsuarios()}listarUsuarios(){this.userComponent.sacarUsuarios().subscribe({next:e=>{this.listUsers=e,this.espera=!0},error:e=>{m().fire("No se a podido recuperar los usuarios",e.error.mensaje)}})}applyFilterGlobal(e,n,s){s.filterGlobal(e.target.value,"contains")}cambiarRol(e){this.usuario=e,this.display=!0}cambiarValorDelRol(e){this.rolUsuario=e}guardarRol(){this.userComponent.cambiarRol(this.usuario.email,this.rolUsuario).subscribe({next:e=>{this.listarUsuarios(),this.display=!1},error:e=>{m().fire("No cambiar el rol del usuario",e.error.mensaje),console.log(e)}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(v))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-list-user"]],decls:19,vars:14,consts:[[1,"container","p-4","bg-white"],["dataKey","id","styleClass","p-datatable-customers p-datatable-gridlines","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rows","showCurrentPageReport","rowsPerPageOptions","loading","paginator","globalFilterFields"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["header","Cambiar estado",3,"visible","baseZIndex","visibleChange"],[1,"divCenter"],["for","ADMIN"],["type","radio","value","ADMIN","name","rol","checked","",1,"input-radio","check1",3,"click"],["for","EMPLOYEE"],["type","radio","value","EMPLOYEE","name","rol","checked","",1,"input-radio","check1",3,"click"],["for","USER"],["type","radio","name","rol","value","USER","checked","",1,"input-radio","check1",3,"click"],["pTemplate","footer"],[1,"p-d-flex"],[2,"text-align","right"],[1,"pi","pi-search",2,"margin","4px 4px 0 0"],["pInputText","","type","text","placeholder","Buscar","size","30",2,"width","auto",3,"input"],["pSortableColumn","name"],[1,"p-d-flex","p-jc-between","p-ai-center"],["field","nombre"],["pSortableColumn","email"],["field","email"],["pSortableColumn","calle"],["field","calle"],["pSortableColumn","telefono"],["field","telefono"],["pSortableColumn","rol"],["field","rol"],[1,"pointer",3,"routerLink"],[1,"pointer",3,"click"],["colspan","7"],["icon","pi pi-check","label","Cambiar","styleClass","p-button-text",3,"click"],["icon","pi pi-times","label","Cancelar",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"p-table",1,2),t.YNc(3,A,4,0,"ng-template",3),t.YNc(4,b,21,0,"ng-template",4),t.YNc(5,M,11,8,"ng-template",5),t.YNc(6,y,3,0,"ng-template",6),t.qZA(),t.qZA(),t.TgZ(7,"p-dialog",7),t.NdJ("visibleChange",function(a){return n.display=a}),t.TgZ(8,"div",8),t.TgZ(9,"label",9),t.TgZ(10,"input",10),t.NdJ("click",function(){return n.cambiarValorDelRol("ADMIN")}),t.qZA(),t._uU(11," Administrador "),t.qZA(),t.TgZ(12,"label",11),t.TgZ(13,"input",12),t.NdJ("click",function(){return n.cambiarValorDelRol("EMPLOYEE")}),t.qZA(),t._uU(14," Empleado "),t.qZA(),t.TgZ(15,"label",13),t.TgZ(16,"input",14),t.NdJ("click",function(){return n.cambiarValorDelRol("USER")}),t.qZA(),t._uU(17," Usuario "),t.qZA(),t.qZA(),t.YNc(18,R,2,0,"ng-template",15),t.qZA()),2&e&&(t.xp6(1),t.Q6J("value",n.listUsers)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(11,N))("loading",!n.espera)("paginator",!0)("globalFilterFields",t.DdM(12,E)),t.xp6(6),t.Akn(t.DdM(13,F)),t.Q6J("visible",n.display)("baseZIndex",1e4))},directives:[c.iA,C.jx,d.V,g.o,c.lQ,c.fz,p.rH,Z.zx],styles:[".pointer[_ngcontent-%COMP%]{cursor:pointer}.check1[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;margin-top:10px}.divCenter[_ngcontent-%COMP%]{text-align:justify}"]}),o})()},{path:"pedidos-user/:id",loadChildren:()=>r.e(868).then(r.bind(r,8241)).then(o=>o.PedidosUserModule)}];let I=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[p.Bz.forChild(S)],p.Bz]}),o})();var J=r(397),_=r(5179),P=r(6602),j=r(4307),k=r(3495),q=r(6898),D=r(8297),Y=r(7537);let z=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[U.ez,I,c.U$,_._8,P.JH,d.S,j.q4,k.vI,q.kW,Z.hJ,J.EV,g.j,D.q,l.JF,Y.u5]]}),o})()}}]);