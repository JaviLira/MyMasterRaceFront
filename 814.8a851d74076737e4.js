"use strict";(self.webpackChunkmacabrosMasterRaceFront=self.webpackChunkmacabrosMasterRaceFront||[]).push([[814],{9473:(V,u,r)=>{r.r(u),r.d(u,{ListUserModule:()=>B});var m=r(6019),p=r(8642),f=r(1659),d=r.n(f),t=r(2383),l=r(4522),U=r(8260);let T=(()=>{class o{constructor(e){this.http=e,this.baseUrl=U.N.baseUrl}sacarUsuarios(){const e=`${this.baseUrl}/usuarios`,i=(new l.WM).set("Authorization",`Bearer ${localStorage.getItem("token")}`);return this.http.get(e,{headers:i})}cambiarRol(e,i){const s=`${this.baseUrl}/usuario/${e.email}?rol=${i}`,a=(new l.WM).set("Authorization",`Bearer ${localStorage.getItem("token")}`);return this.http.put(s,e,{headers:a})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(l.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var v=r(9158),c=r(9326),C=r(481),g=r(5286),Z=r(7043),h=r(4750);function A(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",16),t.TgZ(1,"div",17),t._UZ(2,"i",18),t.TgZ(3,"input",19),t.NdJ("input",function(s){t.CHM(e);const a=t.oxw(),z=t.MAs(2);return a.applyFilterGlobal(s,"contains",z)}),t.qZA(),t.qZA(),t.qZA()}}function x(o,n){1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"th",20),t.TgZ(2,"div",21),t._uU(3," Nombre "),t._UZ(4,"p-sortIcon",22),t.qZA(),t.qZA(),t.TgZ(5,"th",23),t.TgZ(6,"div",21),t._uU(7," Email "),t._UZ(8,"p-sortIcon",24),t.qZA(),t.qZA(),t.TgZ(9,"th",25),t.TgZ(10,"div",21),t._uU(11," Direcci\xf3n "),t._UZ(12,"p-sortIcon",26),t.qZA(),t.qZA(),t.TgZ(13,"th",27),t.TgZ(14,"div",21),t._uU(15," N\xfamero de telefono "),t._UZ(16,"p-sortIcon",28),t.qZA(),t.qZA(),t.TgZ(17,"th",29),t.TgZ(18,"div",21),t._uU(19," Rol "),t._UZ(20,"p-sortIcon",30),t.qZA(),t.qZA(),t.qZA())}function b(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",34),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit;return t.oxw().cambiarRol(s)}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.rol," ")}}function L(o,n){if(1&o&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.rol," ")}}const M=function(o){return["/paginasProtegidas/administrador/listUsers/pedidos-user",o]};function y(o,n){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td",31),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.YNc(9,b,2,1,"td",32),t.YNc(10,L,2,1,"td",33),t.qZA()),2&o){const e=n.$implicit,i=t.oxw();t.xp6(1),t.Q6J("routerLink",t.VKq(7,M,e.name)),t.xp6(1),t.hij(" ",e.name," "),t.xp6(2),t.hij(" ",e.email," "),t.xp6(2),t.hij(" ",e.calle," "),t.xp6(2),t.hij(" ",e.telefono," "),t.xp6(1),t.Q6J("ngIf","ROLE_ADMIN"==i.usuarioBack.rol),t.xp6(1),t.Q6J("ngIf","ROLE_ADMIN"!=i.usuarioBack.rol)}}function N(o,n){1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td",35),t._uU(2,"No hay usuarios."),t.qZA(),t.qZA())}function R(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"p-button",36),t.NdJ("click",function(){return t.CHM(e),t.oxw().guardarRol()}),t.qZA(),t.TgZ(1,"p-button",37),t.NdJ("click",function(){return t.CHM(e),t.oxw().display=!1}),t.qZA()}}const I=function(){return[10,25,50]},E=function(){return["name","email","calle","telefono","rol"]},S=function(){return{width:"150px"}},F=[{path:"",component:(()=>{class o{constructor(e,i){this.userComponent=e,this.barraService=i,this.listUsers=[],this.espera=!1,this.display=!1,this.rolUsuario="USER"}ngOnInit(){this.listarUsuarios()}listarUsuarios(){this.userComponent.sacarUsuarios().subscribe({next:e=>{this.listUsers=e,this.espera=!0},error:e=>{d().fire("No se a podido recuperar los usuarios",e.error.mensaje)}})}applyFilterGlobal(e,i,s){s.filterGlobal(e.target.value,"contains")}cambiarRol(e){this.usuario=e,this.display=!0}cambiarValorDelRol(e){this.rolUsuario=e}guardarRol(){this.userComponent.cambiarRol(this.usuario,this.rolUsuario).subscribe({next:e=>{this.listarUsuarios(),this.display=!1},error:e=>{d().fire("No es posible cambiar el rol del usuario",e.error.mensaje),console.log(e)}})}get usuarioBack(){return this.barraService.usuario}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(T),t.Y36(v.Z))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-list-user"]],decls:19,vars:14,consts:[[1,"container","p-4","bg-white"],["dataKey","id","styleClass","p-datatable-customers p-datatable-gridlines","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rows","showCurrentPageReport","rowsPerPageOptions","loading","paginator","globalFilterFields"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["header","Cambiar estado",3,"visible","baseZIndex","visibleChange"],[1,"divCenter"],["for","ADMIN"],["type","radio","value","ADMIN","name","rol","checked","",1,"input-radio","check1",3,"click"],["for","EMPLOYEE"],["type","radio","value","EMPLOYEE","name","rol","checked","",1,"input-radio","check1",3,"click"],["for","USER"],["type","radio","name","rol","value","USER","checked","",1,"input-radio","check1",3,"click"],["pTemplate","footer"],[1,"p-d-flex"],[2,"text-align","right"],[1,"pi","pi-search",2,"margin","4px 4px 0 0"],["pInputText","","type","text","placeholder","Buscar","size","30",2,"width","auto",3,"input"],["pSortableColumn","name"],[1,"p-d-flex","p-jc-between","p-ai-center"],["field","nombre"],["pSortableColumn","email"],["field","email"],["pSortableColumn","calle"],["field","calle"],["pSortableColumn","telefono"],["field","telefono"],["pSortableColumn","rol"],["field","rol"],[1,"pointer",3,"routerLink"],["class","pointer",3,"click",4,"ngIf"],[4,"ngIf"],[1,"pointer",3,"click"],["colspan","7"],["icon","pi pi-check","label","Cambiar","styleClass","p-button-text",3,"click"],["icon","pi pi-times","label","Cancelar",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"p-table",1,2),t.YNc(3,A,4,0,"ng-template",3),t.YNc(4,x,21,0,"ng-template",4),t.YNc(5,y,11,9,"ng-template",5),t.YNc(6,N,3,0,"ng-template",6),t.qZA(),t.qZA(),t.TgZ(7,"p-dialog",7),t.NdJ("visibleChange",function(a){return i.display=a}),t.TgZ(8,"div",8),t.TgZ(9,"label",9),t.TgZ(10,"input",10),t.NdJ("click",function(){return i.cambiarValorDelRol("ADMIN")}),t.qZA(),t._uU(11," Administrador "),t.qZA(),t.TgZ(12,"label",11),t.TgZ(13,"input",12),t.NdJ("click",function(){return i.cambiarValorDelRol("EMPLOYEE")}),t.qZA(),t._uU(14," Empleado "),t.qZA(),t.TgZ(15,"label",13),t.TgZ(16,"input",14),t.NdJ("click",function(){return i.cambiarValorDelRol("USER")}),t.qZA(),t._uU(17," Usuario "),t.qZA(),t.qZA(),t.YNc(18,R,2,0,"ng-template",15),t.qZA()),2&e&&(t.xp6(1),t.Q6J("value",i.listUsers)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(11,I))("loading",!i.espera)("paginator",!0)("globalFilterFields",t.DdM(12,E)),t.xp6(6),t.Akn(t.DdM(13,S)),t.Q6J("visible",i.display)("baseZIndex",1e4))},directives:[c.iA,C.jx,g.V,Z.o,c.lQ,c.fz,p.rH,m.O5,h.zx],styles:[".pointer[_ngcontent-%COMP%]{cursor:pointer}.check1[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;margin-top:10px}.divCenter[_ngcontent-%COMP%]{text-align:justify}"]}),o})()},{path:"pedidos-user/:id",loadChildren:()=>r.e(868).then(r.bind(r,8241)).then(o=>o.PedidosUserModule)}];let J=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[p.Bz.forChild(F)],p.Bz]}),o})();var k=r(397),P=r(5179),j=r(6602),q=r(4307),D=r(3495),Y=r(6898),O=r(8297),$=r(7537);let B=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[m.ez,J,c.U$,P._8,j.JH,g.S,q.q4,D.vI,Y.kW,h.hJ,k.EV,Z.j,O.q,l.JF,$.u5]]}),o})()}}]);