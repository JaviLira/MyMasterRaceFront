"use strict";(self.webpackChunkmacabrosMasterRaceFront=self.webpackChunkmacabrosMasterRaceFront||[]).push([[819],{8819:($,p,c)=>{c.r(p),c.d(p,{CarritoModule:()=>N});var s=c(6019),u=c(8642),m=c(1659),d=c.n(m),t=c(2383),l=c(4522),C=c(8260);let _=(()=>{class i{constructor(r){this.http=r,this.baseUrl=C.N.baseUrl}buscarArticulosDelCarrito(){const r=`${this.baseUrl}/carrito`,o=(new l.WM).set("Authorization",`Bearer ${localStorage.getItem("token")}`);return this.http.get(r,{headers:o})}borrarArticuloDelCarrito(r){const o=`${this.baseUrl}/carrito/${r}`,e=(new l.WM).set("Authorization",`Bearer ${localStorage.getItem("token")}`);return this.http.delete(o,{headers:e})}cambiarCantidadDelArticuloDelCarrito(r,o){const e=`${this.baseUrl}/carrito/${r}`,n=(new l.WM).set("Authorization",`Bearer ${localStorage.getItem("token")}`);return this.http.put(e,o,{headers:n})}}return i.\u0275fac=function(r){return new(r||i)(t.LFG(l.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function h(i,a){1&i&&(t.TgZ(0,"h2"),t._uU(1,"Carrito vacio"),t.qZA())}function f(i,a){1&i&&t._UZ(0,"img",13)}function A(i,a){if(1&i&&t._UZ(0,"img",14),2&i){const r=t.oxw().$implicit;t.s9C("src",r.articulo.imagenes,t.LSH)}}function Z(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const r=t.oxw().$implicit;t.xp6(1),t.hij("",r.articulo.precio.toFixed(2),"\u20ac")}}function b(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const r=t.oxw().$implicit;t.xp6(1),t.Oqu((r.articulo.precio+r.articulo.fuente.precio+r.articulo.grafica.precio+r.articulo.procesador.precio+r.articulo.ram.precio+r.articulo.discoduro.precio).toFixed(2))}}function x(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const r=t.oxw().$implicit;t.xp6(1),t.hij("",(r.articulo.precio*r.cantidad).toFixed(2),"\u20ac")}}function T(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const r=t.oxw().$implicit;t.xp6(1),t.Oqu(((r.articulo.precio+r.articulo.fuente.precio+r.articulo.grafica.precio+r.articulo.procesador.precio+r.articulo.ram.precio+r.articulo.discoduro.precio)*r.cantidad).toFixed(2))}}function v(i,a){if(1&i){const r=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t.YNc(2,f,1,0,"img",7),t.YNc(3,A,1,1,"img",8),t.qZA(),t.TgZ(4,"td"),t.TgZ(5,"p",9),t._uU(6),t.qZA(),t.qZA(),t.TgZ(7,"td"),t.TgZ(8,"button",10),t.NdJ("click",function(){const n=t.CHM(r).$implicit;return t.oxw(2).disminuirCantidad(n.id,n)}),t._uU(9,"-"),t.qZA(),t._UZ(10,"input",11),t.TgZ(11,"button",10),t.NdJ("click",function(){const n=t.CHM(r).$implicit;return t.oxw(2).aumentarCantidad(n.id,n)}),t._uU(12,"+"),t.qZA(),t.qZA(),t.YNc(13,Z,2,1,"td",1),t.YNc(14,b,2,1,"td",1),t.YNc(15,x,2,1,"td",1),t.YNc(16,T,2,1,"td",1),t.TgZ(17,"td"),t.TgZ(18,"button",12),t.NdJ("click",function(){const n=t.CHM(r).$implicit;return t.oxw(2).borrarArticulo(n.id)}),t._uU(19,"Eliminar"),t.qZA(),t.qZA(),t.qZA()}if(2&i){const r=a.$implicit;t.xp6(2),t.Q6J("ngIf","data:image/png;base64,null"!=r.articulo.imagenes),t.xp6(1),t.Q6J("ngIf","data:image/png;base64,null"==r.articulo.imagenes),t.xp6(3),t.Oqu(r.articulo.nombre),t.xp6(4),t.s9C("value",r.cantidad),t.xp6(3),t.Q6J("ngIf",null==r.articulo.grafica),t.xp6(1),t.Q6J("ngIf",null!=r.articulo.grafica),t.xp6(1),t.Q6J("ngIf",null==r.articulo.grafica),t.xp6(1),t.Q6J("ngIf",null!=r.articulo.grafica)}}const U=function(){return["/paginasProtegidas/datos-compra"]};function q(i,a){if(1&i&&(t.TgZ(0,"div",3),t.TgZ(1,"table",4),t.TgZ(2,"thead"),t.TgZ(3,"th"),t._uU(4,"Producto"),t.qZA(),t._UZ(5,"th"),t.TgZ(6,"th"),t._uU(7,"Cantidad"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Precio unidad"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Precio total"),t.qZA(),t._UZ(12,"th"),t.qZA(),t.YNc(13,v,20,8,"tr",5),t.TgZ(14,"tr"),t._UZ(15,"td"),t._UZ(16,"td"),t.TgZ(17,"td"),t._uU(18,"Total"),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.qZA(),t._UZ(21,"td"),t._UZ(22,"td"),t.qZA(),t.qZA(),t.TgZ(23,"button",6),t._uU(24,"Comprar"),t.qZA(),t.qZA()),2&i){const r=t.oxw();t.xp6(13),t.Q6J("ngForOf",r.listaArticulosCarrito),t.xp6(7),t.hij("",r.valorTotal.toFixed(2),"\u20ac"),t.xp6(3),t.Q6J("routerLink",t.DdM(3,U))}}const I=[{path:"",component:(()=>{class i{constructor(r){this.carritoService=r,this.espera=!1,this.valorTotal=0}ngOnInit(){this.buscarArticulos()}buscarArticulos(){this.carritoService.buscarArticulosDelCarrito().subscribe({next:r=>{this.listaArticulosCarrito=r,this.espera=!0,this.calcularTotal()},error:r=>{}})}calcularTotal(){for(let r=0;r<this.listaArticulosCarrito.length;r++)this.valorTotal=null!=this.listaArticulosCarrito[r].articulo.discoduro?this.valorTotal+(this.listaArticulosCarrito[r].articulo.precio+this.listaArticulosCarrito[r].articulo.procesador.precio+this.listaArticulosCarrito[r].articulo.ram.precio+this.listaArticulosCarrito[r].articulo.fuente.precio+this.listaArticulosCarrito[r].articulo.grafica.precio+this.listaArticulosCarrito[r].articulo.discoduro.precio)*this.listaArticulosCarrito[r].cantidad:this.valorTotal+this.listaArticulosCarrito[r].articulo.precio*this.listaArticulosCarrito[r].cantidad}borrarArticulo(r){this.carritoService.borrarArticuloDelCarrito(r).subscribe({next:o=>{this.calcularTotal(),this.listaArticulosCarrito.length>1&&this.buscarArticulos(),1==this.listaArticulosCarrito.length&&(this.listaArticulosCarrito=[],this.valorTotal=0,this.espera=!1)},error:o=>{d().fire("No se han podido borrar")}})}aumentarCantidad(r,o){o.cantidad=o.cantidad+1,console.log(o),this.carritoService.cambiarCantidadDelArticuloDelCarrito(r,o).subscribe({next:e=>{this.buscarArticulos()},error:e=>{d().fire("No es posible cambiar la cantidad el articulo",e.error.mensaje)}})}disminuirCantidad(r,o){o.cantidad=o.cantidad-1,console.log(o),this.carritoService.cambiarCantidadDelArticuloDelCarrito(r,o).subscribe({next:e=>{this.buscarArticulos()},error:e=>{d().fire("No es posible cambiar la cantidad el articulo",e.error.mensaje)}})}}return i.\u0275fac=function(r){return new(r||i)(t.Y36(_))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-carrito"]],decls:6,vars:2,consts:[[1,"container","p-4","bg-white"],[4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"table-responsive"],[1,"table","table-bordered","table-condensed"],[4,"ngFor","ngForOf"],[1,"btn","btn-primary","boton2",3,"routerLink"],["align","center","src","./assets/carrito.png","class","nailsLogin col-12 img1","alt","Imagen articulo",4,"ngIf"],["align","center","class","card-img-top img1","alt","imagen articulo",3,"src",4,"ngIf"],["align","left"],[3,"click"],["type","number",1,"form-control","input1",3,"value"],["align","right",1,"btn","btn-danger","boton1",3,"click"],["align","center","src","./assets/carrito.png","alt","Imagen articulo",1,"nailsLogin","col-12","img1"],["align","center","alt","imagen articulo",1,"card-img-top","img1",3,"src"]],template:function(r,o){1&r&&(t.TgZ(0,"div",0),t.TgZ(1,"h1"),t._uU(2,"Carrito de la compra"),t.qZA(),t._UZ(3,"br"),t.YNc(4,h,2,0,"h2",1),t.YNc(5,q,25,4,"div",2),t.qZA()),2&r&&(t.xp6(4),t.Q6J("ngIf",!o.espera),t.xp6(1),t.Q6J("ngIf",o.espera))},directives:[s.O5,s.sg,u.rH],styles:[".boton1[_ngcontent-%COMP%]{background-color:#f02d2d}.boton2[_ngcontent-%COMP%]{margin-left:1.5%}.input1[_ngcontent-%COMP%]{border-width:1px 1px}"]}),i})()}];let M=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[u.Bz.forChild(I)],u.Bz]}),i})(),N=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[s.ez,M]]}),i})()}}]);