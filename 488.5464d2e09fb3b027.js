"use strict";(self.webpackChunkmacabrosMasterRaceFront=self.webpackChunkmacabrosMasterRaceFront||[]).push([[488],{9488:(S,u,a)=>{a.r(u),a.d(u,{RamModule:()=>Y});var l=a(6019),m=a(8642),p=a(1659),s=a.n(p),n=a(7537),t=a(2383),d=a(176),g=a(6077),_=a(9158);function f(i,r){1&i&&t._UZ(0,"img",26)}function b(i,r){if(1&i&&t._UZ(0,"img",27),2&i){const o=t.oxw(2);t.s9C("src",o.articulo.imagenGenerada,t.LSH)}}const x=function(i){return["/paginasProtegidas/administrador/editar-articulo/editarRam",i]};function h(i,r){if(1&i&&(t.TgZ(0,"button",28),t._uU(1,"Editar"),t.qZA()),2&i){const o=t.oxw(2);t.Q6J("routerLink",t.VKq(1,x,o.idRam))}}function Z(i,r){if(1&i){const o=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){return t.CHM(o),t.oxw(2).desactivar()}),t._uU(1,"Desactivar"),t.qZA()}}function C(i,r){if(1&i){const o=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){return t.CHM(o),t.oxw(2).activar()}),t._uU(1,"Activar"),t.qZA()}}function T(i,r){if(1&i){const o=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){return t.CHM(o),t.oxw(2).anadirUncomentario()}),t._uU(1,"A\xf1adir comentario"),t.qZA()}}function A(i,r){if(1&i&&(t.TgZ(0,"button",32),t._uU(1,"A\xf1adir"),t.qZA()),2&i){const o=t.oxw(2);t.Q6J("disabled",o.miFormulario.invalid)}}function q(i,r){if(1&i){const o=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){return t.CHM(o),t.oxw(2).anadirUncomentario()}),t._uU(1,"Cancelar"),t.qZA()}}function R(i,r){1&i&&(t.TgZ(0,"label",33),t._uU(1,"Comentario"),t.qZA())}function U(i,r){1&i&&t._UZ(0,"input",34)}function k(i,r){1&i&&(t.TgZ(0,"span",35),t._uU(1," No puede estar vacio "),t.qZA())}function J(i,r){if(1&i&&(t.TgZ(0,"div",37),t.TgZ(1,"div"),t.TgZ(2,"p",38),t.TgZ(3,"b"),t._uU(4),t.qZA(),t.qZA(),t.qZA(),t.TgZ(5,"div"),t.TgZ(6,"p",39),t.TgZ(7,"q"),t._uU(8),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const o=r.$implicit;t.xp6(4),t.Oqu(o.usuario.name),t.xp6(4),t.Oqu(o.comentario)}}function M(i,r){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,J,9,2,"div",36),t.qZA()),2&i){const o=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",o.listaComentarios)}}function N(i,r){if(1&i){const o=t.EpF();t.TgZ(0,"div",1),t.TgZ(1,"div",2),t.YNc(2,f,1,0,"img",3),t.YNc(3,b,1,1,"img",4),t.qZA(),t.TgZ(4,"div",2),t.TgZ(5,"div",5),t.TgZ(6,"div",6),t.TgZ(7,"div",7),t.TgZ(8,"h1",8),t._uU(9),t.qZA(),t.TgZ(10,"p",9),t.TgZ(11,"b"),t._uU(12,"Caracter\xedsticas:"),t.qZA(),t.qZA(),t.TgZ(13,"p"),t._uU(14),t.qZA(),t.TgZ(15,"p",9),t.TgZ(16,"b"),t._uU(17,"Tipo: "),t.qZA(),t._uU(18),t.qZA(),t.TgZ(19,"p",9),t.TgZ(20,"b"),t._uU(21,"Formato: "),t.qZA(),t._uU(22),t.qZA(),t.TgZ(23,"p",9),t.TgZ(24,"b"),t._uU(25,"Capacidad: "),t.qZA(),t._uU(26),t.qZA(),t.TgZ(27,"p",9),t.TgZ(28,"b"),t._uU(29,"Kit: "),t.qZA(),t._uU(30),t.qZA(),t.TgZ(31,"p",9),t.TgZ(32,"b"),t._uU(33,"Precio: "),t.qZA(),t._uU(34),t.qZA(),t.qZA(),t.TgZ(35,"div",10),t.TgZ(36,"button",11),t.NdJ("click",function(){return t.CHM(o),t.oxw().comprar()}),t._uU(37,"Comprar"),t.qZA(),t.TgZ(38,"button",12),t.NdJ("click",function(){return t.CHM(o),t.oxw().anadirCarrito()}),t._uU(39,"A\xf1adir la carrito"),t.qZA(),t.qZA(),t.qZA(),t.YNc(40,h,2,3,"button",13),t.YNc(41,Z,2,0,"button",14),t.YNc(42,C,2,0,"button",15),t.qZA(),t.qZA(),t.TgZ(43,"div",16),t.TgZ(44,"div",17),t.TgZ(45,"h2",18),t._uU(46,"Comentarios: "),t.qZA(),t.TgZ(47,"form",19),t.NdJ("ngSubmit",function(){return t.CHM(o),t.oxw().hacerComentario()}),t.YNc(48,T,2,0,"button",20),t.YNc(49,A,2,1,"button",21),t.YNc(50,q,2,0,"button",20),t._UZ(51,"br"),t.YNc(52,R,2,0,"label",22),t.YNc(53,U,1,0,"input",23),t.YNc(54,k,2,0,"span",24),t.qZA(),t.qZA(),t.YNc(55,M,2,1,"div",25),t.qZA(),t.qZA()}if(2&i){const o=t.oxw();t.xp6(2),t.Q6J("ngIf","data:image/png;base64,null"==o.articulo.imagenGenerada),t.xp6(1),t.Q6J("ngIf","data:image/png;base64,null"!=o.articulo.imagenGenerada),t.xp6(6),t.Oqu(o.articulo.nombre),t.xp6(5),t.Oqu(o.articulo.descripcion),t.xp6(4),t.Oqu(o.articulo.tipo),t.xp6(4),t.Oqu(o.articulo.formato),t.xp6(4),t.hij("",o.articulo.capacidad,"GB"),t.xp6(4),t.hij("",o.articulo.kit,"GB"),t.xp6(4),t.hij("",o.articulo.precio,"\u20ac"),t.xp6(2),t.Q6J("disabled",!o.validarToken),t.xp6(2),t.Q6J("disabled",!o.validarToken),t.xp6(2),t.Q6J("ngIf",o.rolAdministrador&&o.validarToken),t.xp6(1),t.Q6J("ngIf",o.rolAdministrador&&o.articulo.activo&&o.validarToken),t.xp6(1),t.Q6J("ngIf",o.rolAdministrador&&!o.articulo.activo&&o.validarToken),t.xp6(5),t.Q6J("formGroup",o.miFormulario),t.xp6(1),t.Q6J("ngIf",!o.anadirComentario),t.xp6(1),t.Q6J("ngIf",o.anadirComentario),t.xp6(1),t.Q6J("ngIf",o.anadirComentario),t.xp6(2),t.Q6J("ngIf",o.anadirComentario),t.xp6(1),t.Q6J("ngIf",o.anadirComentario),t.xp6(1),t.Q6J("ngIf",o.campoEsValido("opinion")),t.xp6(1),t.Q6J("ngIf",!o.anadirComentario)}}const I=[{path:"",component:(()=>{class i{constructor(o,e,c,y,O,Q){this.route=o,this.componentesService=e,this.router=c,this.authService=y,this.fb=O,this.barraService=Q,this.espera=!1,this.validarToken=!1,this.anadirComentario=!1,this.idRam=this.route.snapshot.paramMap.get("id"),this.miFormulario=this.fb.group({opinion:["",[n.kI.required,n.kI.minLength(4)]]})}ngOnInit(){this.buscarArticulo(),this.validar(),this.sacarComentarios()}get rolAdministrador(){return this.barraService.rolAdministrador}buscarArticulo(){this.componentesService.sacarRam(this.route.snapshot.paramMap.get("id")).subscribe({next:o=>{this.articulo=o,this.articulo.imagenGenerada=this.componentesService.obtenerFoto(this.articulo),this.espera=!0},error:o=>{console.log(o),s().fire("No se han podido cargar los datos del servidor")}})}comprar(){this.validar(),this.validarToken?this.componentesService.enviarCarrito(this.articulo).subscribe({next:o=>{this.router.navigateByUrl("/paginasProtegidas/carrito")},error:o=>{s().fire("No se a podido enviar el articulo al carrito",o.error.mensaje)}}):s().fire("Necesitas estar logeado")}anadirCarrito(){this.validar(),this.validarToken?this.componentesService.enviarCarrito(this.articulo).subscribe({next:o=>{s().fire("Perfecto","El articulo se a a\xf1adido a su carrito","success")},error:o=>{s().fire("No se a podido enviar el articulo al carrito",o.error.mensaje)}}):s().fire("Necesitas estar logeado")}validar(){this.authService.validarToken().subscribe({next:o=>(this.validarToken=!0,!0),error:o=>(this.validarToken=!1,!1)})}anadirUncomentario(){this.sacarComentarios(),this.anadirComentario=1!=this.anadirComentario}hacerComentario(){this.componentesService.hacerComentario(this.route.snapshot.paramMap.get("id"),this.miFormulario.value.opinion).subscribe({next:o=>{this.sacarComentarios(),this.anadirComentario=!1},error:o=>{s().fire("No se han podido enviar el comentario",o.error.mensaje,"error")}})}sacarComentarios(){this.componentesService.sacarComentarios(this.route.snapshot.paramMap.get("id")).subscribe({next:o=>{this.listaComentarios=o},error:o=>{}})}campoEsValido(o){return this.miFormulario.controls[o].errors&&this.miFormulario.controls[o].touched}activar(){this.componentesService.activarArticulo(this.articulo,this.route.snapshot.paramMap.get("id")).subscribe({next:o=>{this.articulo.activo=!0},error:o=>{}})}desactivar(){this.componentesService.desactivarticulo(this.articulo,this.route.snapshot.paramMap.get("id")).subscribe({next:o=>{this.articulo.activo=!1},error:o=>{}})}}return i.\u0275fac=function(o){return new(o||i)(t.Y36(m.gz),t.Y36(d.H),t.Y36(m.F0),t.Y36(g.e),t.Y36(n.qu),t.Y36(_.Z))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-ram"]],decls:1,vars:1,consts:[["class","row gx-0",4,"ngIf"],[1,"row","gx-0"],[1,"col"],["src","./assets/ramEjemplo.png","class","nailsLogin col-12 img3","alt","imagen articulo",4,"ngIf"],["class","card-img-top img3","alt","imagen articulo",3,"src",4,"ngIf"],[1,""],[1,"card","div1","col-12"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"text-center"],[1,"btn","btn-primary","col-5",3,"disabled","click"],[1,"btn","btn-light","col-5","color1",3,"disabled","click"],["class","btn btn-primary btnEditar col-5",3,"routerLink",4,"ngIf"],["class","btn btn-danger btnActivar col-5",3,"click",4,"ngIf"],["class","btn btn-success btnActivar col-5",3,"click",4,"ngIf"],[1,"comentarios"],[1,"col-12"],[1,"h2Comentarios"],["autocomplete","off",3,"formGroup","ngSubmit"],["class","btn btn-primary ",3,"click",4,"ngIf"],["type","submit","class","btn btn-primary ",3,"disabled",4,"ngIf"],["class","form-control-label h4",4,"ngIf"],["type","text","class","form-control","placeholder","Escriva su comentario","formControlName","opinion",4,"ngIf"],["class","form-text text-danger",4,"ngIf"],[4,"ngIf"],["src","./assets/ramEjemplo.png","alt","imagen articulo",1,"nailsLogin","col-12","img3"],["alt","imagen articulo",1,"card-img-top","img3",3,"src"],[1,"btn","btn-primary","btnEditar","col-5",3,"routerLink"],[1,"btn","btn-danger","btnActivar","col-5",3,"click"],[1,"btn","btn-success","btnActivar","col-5",3,"click"],[1,"btn","btn-primary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"form-control-label","h4"],["type","text","placeholder","Escriva su comentario","formControlName","opinion",1,"form-control"],[1,"form-text","text-danger"],["class","comentarioDelUsuario",4,"ngFor","ngForOf"],[1,"comentarioDelUsuario"],[1,"nombreUsuario"],[1,"comentario"]],template:function(o,e){1&o&&t.YNc(0,N,56,22,"div",0),2&o&&t.Q6J("ngIf",e.espera)},directives:[l.O5,n._Y,n.JL,n.sg,m.rH,n.Fj,n.JJ,n.u,l.sg],styles:["button[_ngcontent-%COMP%]{margin-bottom:10px;margin-right:20px}.color1[_ngcontent-%COMP%]{border:solid 2px;border-color:#94949469}.card[_ngcontent-%COMP%]{margin:0;cursor:default}.comentarios[_ngcontent-%COMP%]{padding-top:50px;padding-left:20px;padding-right:20px}.comentario[_ngcontent-%COMP%]{color:#000000b7}.comentarioDelUsuario[_ngcontent-%COMP%]{margin:20px}.btnEditar[_ngcontent-%COMP%]{margin-top:30px;margin-left:3vw}.btnActivar[_ngcontent-%COMP%]{margin-top:30px}@media screen and (max-width: 800px){.btnActivar[_ngcontent-%COMP%]{margin-top:30px;margin-left:3vw}}"]}),i})()}];let F=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[m.Bz.forChild(I)],m.Bz]}),i})(),Y=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[l.ez,F,n.UX]]}),i})()}}]);